# General C++ settings
build --cxxopt=-std=c++17
build --cxxopt=-faligned-allocation

# Persistence & Cache
# We use a path that can be easily overridden or defaulted.
# Inside Docker, we will set BAZEL_CACHE_ROOT=/bazel_cache
common --repository_cache=~/.bazel_cache/repository
build --disk_cache=~/.bazel_cache/disk

# M1 (Apple Silicon) Host Optimizations
# Use with: bazel build --config=m1 ...
build:m1 --cpu=darwin_arm64
build:m1 --macos_cpus=arm64

# Execution Speed Optimizations (Works on both Mac and Linux)
build --jobs=auto
build --reuse_sandbox_directories
build --experimental_inmemory_dotd_files
build --experimental_inmemory_jdeps_files
build --remote_cache_compression

# Speed up by disabling dSYM generation by default
build --apple_generate_dsym=false

# UI & Logging
common --announce_rc
common --color=yes
common --show_progress_rate_limit=0
